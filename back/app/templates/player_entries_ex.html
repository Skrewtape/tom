{% extends "index_ex.html" %}
{% block content %}
<center>  Player {{player.first_name}} {{player.last_name}}</center> <br>
  {% for division_id in divisions %}
    {% if herb_player_points[division_id]|length > 0%}
      <div class="panel panel-default" style='width:97%;margin:auto'>
        <div class="panel-heading">Best entries for {{divisions[division_id]['tournament_name']}}</div>
        <center>
          Rank : {{herb_player_points[division_id][player.player_id]['rank']}}
        </center>
        <table class='table'>
          <tr>
            <th> Rank </th>
            <th> Machine</th>
            <th> Score </th>
            <th> Points </th>
            </tr>
        {% for score in herb_player_points[division_id][player.player_id]['scores'] %}
          <tr>
            <td> {{score.filter_rank}}</td>
            <td> {{score.machine_abbreviation}} </td>
            <td> {{score.score_score}} </td>
            <td> {{score.filter_score}} </td>            
          </tr>          
        {% endfor %}
        <tr>
          <td colspan=3></td><td>{{herb_player_points[division_id][player.player_id]['total_points']}}</td>
          </tr>
        </table>
      </div>
    {% endif %}
    {% if sorted_division_entry_ids[division_id]|length > 0%}
      <div class="panel panel-default" style='width:97%;margin:auto'>
        <div class="panel-heading">Best entries for {{divisions[division_id]['tournament_name']}}</div>
        <center>
            {% if division_results[division_id][sorted_division_entry_ids[division_id][0]]['entry']['entry_completed'] == False %}
              (IN PROGRESS)
            {% endif %}
            Entry ID : # {{division_results[division_id][sorted_division_entry_ids[division_id][0]]['entry']['entry_entry_id']}}, Rank : {{division_results[division_id][sorted_division_entry_ids[division_id][0]]['entry']['second_query_scorepointsrank']}} </center>
        <table class='table'>
          <tr>
            <th> Rank </th>
            <th> Machine</th>
            <th> Score </th>
            <th> Points </th>
            </tr>
        {% for score in division_results[division_id][sorted_division_entry_ids[division_id][0]]['scores'] %}
          <tr>
            <td> {{score['first_query_scorerank']}}</td>
            <td> {{score['first_query_machine_abbreviation']}} </td>
            <td> {{score['score_score']}} </td>
            <td> {{score['first_query_scorepoints']}}</td>
          </tr>          
        {% endfor %}
        <td></td><td></td><td></td><td>{{division_results[division_id][sorted_division_entry_ids[division_id][0]]['entry']['second_query_scorepointssum']}}</td>
        </table>        
      </div>
    {% endif %}
  {% endfor %}
  
  {% for division_id in divisions %}
    {% if herb_player_points[division_id]|length > 0 %}
      <h3>All entries for {{divisions[division_id]['tournament_name']}}</h3>      
      {% for score in herb_player_points[division_id][player.player_id]['all_scores'] %}
      <div class="panel panel-default" style='width:97%;margin:auto'>
        <div class="panel-heading"><center>Entry ID : {{score.entry_entry_id}}, Rank : {{score.filter_rank}} </center></div>
        <table class='table'>
          <tr>
            <th> Rank </th>
            <th> Machine</th>
            <th> Score </th>
            <th> Points </th>
            </tr>
          <tr>
            <td> {{score.filter_rank}}</td>
            <td> {{score.machine_abbreviation}} </td>
            <td> {{score.score_score}} </td>
            <td> {{score.filter_score}} </td>            
          </tr>          
        </table>
      </div>
      {% endfor %}
    {% endif %}
    {% if sorted_division_entry_ids[division_id]|length > 0%}
      <h3>All entries for {{divisions[division_id]['tournament_name']}}</h3>
      {% for entry_id,entry in division_results[division_id].items() %}
      
      <div class="panel panel-default" style='width:97%;margin:auto'>
        <div class="panel-heading">
          <center>
            {% if entry['entry']['entry_completed'] == False %}
              (IN PROGRESS)
            {% endif %}
            Entry ID : # {{entry['entry']['entry_entry_id']}}, Rank : {{entry['entry']['second_query_scorepointsrank']}}
          </center>
        </div>

        <table class='table'>
          <tr>
            <th> Rank </th>
            <th> Machine</th>
            <th> Score </th>
            <th> Points </th>
            </tr>
         {% for score in entry['scores'] %}
          <tr>
            <td> {{score['first_query_scorerank']}}</td>
            <td> {{score['first_query_machine_abbreviation']}} </td>
            <td> {{score['score_score']}} </td>
            <td> {{score['first_query_scorepoints']}}</td>
          </tr>          
        {% endfor %}
        <td></td><td></td><td></td><td>{{entry['entry']['second_query_scorepointssum']}}</td>
        </table>        
      </div>
      {% endfor %}
    {% endif %}
  {% endfor %}

  {% endblock %}
